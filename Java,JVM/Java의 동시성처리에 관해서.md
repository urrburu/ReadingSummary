# 자바의 동시성 처리

## 동시성을 고려하지 않는 상태
 - 대표적으로 최근 싱글톤 예제에서 많이 보인다. 자바는 멀티스레딩 언어라 스레드 세이프함을 싱글톤 객체에게 요구해야 함에도 불구하고, 싱크로나이즈드를 안 붙인 객체가 많다. 
 - 이렇게 되면 실제로 실행했을때 여러 스레드가 해당 객체를 요청하게 되면 객체를 생성하는 동안 if문에서 이미 객체의 인스턴스가 존재하냐? 판단이 들어가고, 객체가 존재하지 않는다는 판단을 여러 스레드가 하게 되면 같은 인스턴스가 여러개 메모리 위에 올라간다. 



### synchronized

synchronized는 멀티 스레드 환경에서 동시성 제어를 위해 공유 객체를 동기화하는 키워드이다. synchronized 블록 안에서 관리되는 자원들은 원자성을 보장할 수 있다.

### atomic

atomic 또한 멀티 스레드 환경에서 원자성을 보장하기 위해 나온 개념이다. 동기화(blockin)가 아닌 CAS(Compared And Swap)라는 알고리즘으로 작동하여 원자성을 보장한다.

CAS 알고리즘이란 volatile에서 설명했던 CPU Cache Memory와 RAM을 비교하여 일치한다면 CPU Cache Memory와 RAM에 적용하고, 일치하지 않는다면 재시도함으로써 어떠한 스레드에서 공유 자원에 읽기/쓰기 작업을 하더라도 원자성을 보장한다.

대표적인 예로, 자바의 Concurrent 패키지의 타입들은 CAS 알고리즘을 이용해 원자성을 보장한다.